const mim_video={init:function(t,e){t&&this.initBackground(t),e&&this.initPlay(e)},initBackground:function(t){const e=this;let i=0;e.backgroundEs={},$("."+t).each(function(){i++,$(this).attr("data-background_id","background_video_"+i),e.backgroundEs["background_video_"+i]={video_wrap:$(this),video_frame:null},e.createFrame(e.backgroundEs["background_video_"+i])}),$(window).resize(function(){e.resize()}),e.resize()},createFrame:function(t){let e=t.video_wrap.attr("data-video_link");if(""===e)return!1;{const i=t.video_wrap,o=document.createElement("iframe"),a=document.createElement("div"),n=t.video_wrap.attr("data-overlay");e=this.buildUrl(e),a.setAttribute("class","overlay"),a.setAttribute("style",n),o.src=e,t.video_wrap.append(o),t.video_wrap.append(a),t.video_wrap=i,t.video_frame=o}},resize:function(){const t=this,e=$(window).width();for(const i in t.backgroundEs){const o=t.backgroundEs[i];let a=o.video_wrap.height()+60,n=0,d=0,r=0;const l=960/540;if("hero"===o.video_wrap.attr("data-video_type")){const t=$("#header");a=$(window).height()<t.outerHeight()?t.outerHeight():$(window).height()}(d=(n=e)/l)<(a+=60)&&(r=-1*((n=(d=a)*l)-e)/2);let s="width: "+n+"px; height: "+d+"px;";0!==r&&(s+="left: "+r+"px;"),o.video_frame.setAttribute("style",s)}},initPlay:function(t){const e=this;$("."+t).click(function(){const t=$(this).attr("data-video_link");e.playVideo(t)})},playVideo:function(t){const e=t.split("?"),i={autoplay:1};if(-1!==t.indexOf("youtube")||-1!==t.indexOf("vimeo")&&(i["buttons.watchlater"]="false",i["buttons.like"]="false",i["buttons.share"]="false",t=e[0].replace("/vimeo.com/","/player.vimeo.com/video/")),void 0!==e[1]){const t=e[1].split("&");for(let e=0;e<t.length;e++){const o=t[e].split("=");void 0!==o[1]?i[o[0]]=o[1]:i[o[0]]=""}}t+="?"+$.param(i);const o=$("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen />").addClass("videoLightbox__embed").attr({src:t,frameborder:0}),a=$("<button />").addClass("videoLightbox__closeButton").html("<span>Close <label>&times;</label></span>"),n=$("<div />").addClass("videoLightbox").append(o).append(a).appendTo("body").animate({opacity:1},{duration:2e3});a.click(function(){n.animate({opacity:0},{duration:1e3,complete:function(){n.remove()}})})},buildUrl:function(t){const e=t.split("?"),i={autoplay:1};if(-1!==t.indexOf("youtube")?(i.controls=0,i.showinfo=0,i.autohide=1,i.loop=1):-1!==t.indexOf("vimeo")&&(i.background=1,i.title=0,i.byline=0,i.portrait=0,i.autoplay=1,i.loop=1,t=e[0].replace("/vimeo.com/","/player.vimeo.com/video/")),void 0!==e[1]){const t=e[1].split("&");for(let e=0;e<t.length;e++){const o=t[e].split("=");void 0!==o[1]?i[o[0]]=o[1]:i[o[0]]=""}}return t+="?"+$.param(i)}};mim_video.init();