!function(){return function n(e,t,r){function i(o,a){if(!t[o]){if(!e[o]){var c="function"==typeof require&&require;if(!a&&c)return c(o,!0);if(u)return u(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var s=t[o]={exports:{}};e[o][0].call(s.exports,function(n){return i(e[o][1][n]||n)},s,s.exports,n,e,t,r)}return t[o].exports}for(var u="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}}()({1:[function(n,e,t){!function(){var n=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(e){var r=this.prototype;n=!0;var i=new this;for(var u in n=!1,e)i[u]="function"==typeof e[u]&&"function"==typeof r[u]&&t.test(e[u])?function(n,e){return function(){var t=this._super;this._super=r[n];var i=e.apply(this,arguments);return this._super=t,i}}(u,e[u]):e[u];function o(){!n&&this.init&&this.init.apply(this,arguments)}return o.prototype=i,o.prototype.constructor=o,o.extend=arguments.callee,o},e.exports=Class}()},{}],2:[function(n,e,t){(function(n){!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this||{},i=r._,u=Array.prototype,o=Object.prototype,a="undefined"!=typeof Symbol?Symbol.prototype:null,c=u.push,l=u.slice,s=o.toString,f=o.hasOwnProperty,p=Array.isArray,h=Object.keys,v=Object.create,y=function(){},d=function(n){return n instanceof d?n:this instanceof d?void(this._wrapped=n):new d(n)};void 0===t||t.nodeType?r._=d:(void 0!==e&&!e.nodeType&&e.exports&&(t=e.exports=d),t._=d),d.VERSION="1.9.1";var g,S=function(n,e,t){if(void 0===e)return n;switch(null==t?3:t){case 1:return function(t){return n.call(e,t)};case 3:return function(t,r,i){return n.call(e,t,r,i)};case 4:return function(t,r,i,u){return n.call(e,t,r,i,u)}}return function(){return n.apply(e,arguments)}},m=function(n,e,t){return d.iteratee!==g?d.iteratee(n,e):null==n?d.identity:d.isFunction(n)?S(n,e,t):d.isObject(n)&&!d.isArray(n)?d.matcher(n):d.property(n)};d.iteratee=g=function(n,e){return m(n,e,1/0)};var _=function(n,e){return e=null==e?n.length-1:+e,function(){for(var t=Math.max(arguments.length-e,0),r=Array(t),i=0;i<t;i++)r[i]=arguments[i+e];switch(e){case 0:return n.call(this,r);case 1:return n.call(this,arguments[0],r);case 2:return n.call(this,arguments[0],arguments[1],r)}var u=Array(e+1);for(i=0;i<e;i++)u[i]=arguments[i];return u[e]=r,n.apply(this,u)}},b=function(n){if(!d.isObject(n))return{};if(v)return v(n);y.prototype=n;var e=new y;return y.prototype=null,e},x=function(n){return function(e){return null==e?void 0:e[n]}},k=function(n,e){return null!=n&&f.call(n,e)},j=function(n,e){for(var t=e.length,r=0;r<t;r++){if(null==n)return;n=n[e[r]]}return t?n:void 0},E=Math.pow(2,53)-1,w=x("length"),A=function(n){var e=w(n);return"number"==typeof e&&e>=0&&e<=E};d.each=d.forEach=function(n,e,t){var r,i;if(e=S(e,t),A(n))for(r=0,i=n.length;r<i;r++)e(n[r],r,n);else{var u=d.keys(n);for(r=0,i=u.length;r<i;r++)e(n[u[r]],u[r],n)}return n},d.map=d.collect=function(n,e,t){e=m(e,t);for(var r=!A(n)&&d.keys(n),i=(r||n).length,u=Array(i),o=0;o<i;o++){var a=r?r[o]:o;u[o]=e(n[a],a,n)}return u};var T=function(n){return function(e,t,r,i){var u=arguments.length>=3;return function(e,t,r,i){var u=!A(e)&&d.keys(e),o=(u||e).length,a=n>0?0:o-1;for(i||(r=e[u?u[a]:a],a+=n);a>=0&&a<o;a+=n){var c=u?u[a]:a;r=t(r,e[c],c,e)}return r}(e,S(t,i,4),r,u)}};d.reduce=d.foldl=d.inject=T(1),d.reduceRight=d.foldr=T(-1),d.find=d.detect=function(n,e,t){var r=(A(n)?d.findIndex:d.findKey)(n,e,t);if(void 0!==r&&-1!==r)return n[r]},d.filter=d.select=function(n,e,t){var r=[];return e=m(e,t),d.each(n,function(n,t,i){e(n,t,i)&&r.push(n)}),r},d.reject=function(n,e,t){return d.filter(n,d.negate(m(e)),t)},d.every=d.all=function(n,e,t){e=m(e,t);for(var r=!A(n)&&d.keys(n),i=(r||n).length,u=0;u<i;u++){var o=r?r[u]:u;if(!e(n[o],o,n))return!1}return!0},d.some=d.any=function(n,e,t){e=m(e,t);for(var r=!A(n)&&d.keys(n),i=(r||n).length,u=0;u<i;u++){var o=r?r[u]:u;if(e(n[o],o,n))return!0}return!1},d.contains=d.includes=d.include=function(n,e,t,r){return A(n)||(n=d.values(n)),("number"!=typeof t||r)&&(t=0),d.indexOf(n,e,t)>=0},d.invoke=_(function(n,e,t){var r,i;return d.isFunction(e)?i=e:d.isArray(e)&&(r=e.slice(0,-1),e=e[e.length-1]),d.map(n,function(n){var u=i;if(!u){if(r&&r.length&&(n=j(n,r)),null==n)return;u=n[e]}return null==u?u:u.apply(n,t)})}),d.pluck=function(n,e){return d.map(n,d.property(e))},d.where=function(n,e){return d.filter(n,d.matcher(e))},d.findWhere=function(n,e){return d.find(n,d.matcher(e))},d.max=function(n,e,t){var r,i,u=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=A(n)?n:d.values(n)).length;a<c;a++)null!=(r=n[a])&&r>u&&(u=r);else e=m(e,t),d.each(n,function(n,t,r){((i=e(n,t,r))>o||i===-1/0&&u===-1/0)&&(u=n,o=i)});return u},d.min=function(n,e,t){var r,i,u=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,c=(n=A(n)?n:d.values(n)).length;a<c;a++)null!=(r=n[a])&&r<u&&(u=r);else e=m(e,t),d.each(n,function(n,t,r){((i=e(n,t,r))<o||i===1/0&&u===1/0)&&(u=n,o=i)});return u},d.shuffle=function(n){return d.sample(n,1/0)},d.sample=function(n,e,t){if(null==e||t)return A(n)||(n=d.values(n)),n[d.random(n.length-1)];var r=A(n)?d.clone(n):d.values(n),i=w(r);e=Math.max(Math.min(e,i),0);for(var u=i-1,o=0;o<e;o++){var a=d.random(o,u),c=r[o];r[o]=r[a],r[a]=c}return r.slice(0,e)},d.sortBy=function(n,e,t){var r=0;return e=m(e,t),d.pluck(d.map(n,function(n,t,i){return{value:n,index:r++,criteria:e(n,t,i)}}).sort(function(n,e){var t=n.criteria,r=e.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(t<r||void 0===r)return-1}return n.index-e.index}),"value")};var O=function(n,e){return function(t,r,i){var u=e?[[],[]]:{};return r=m(r,i),d.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};d.groupBy=O(function(n,e,t){k(n,t)?n[t].push(e):n[t]=[e]}),d.indexBy=O(function(n,e,t){n[t]=e}),d.countBy=O(function(n,e,t){k(n,t)?n[t]++:n[t]=1});var C=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;d.toArray=function(n){return n?d.isArray(n)?l.call(n):d.isString(n)?n.match(C):A(n)?d.map(n,d.identity):d.values(n):[]},d.size=function(n){return null==n?0:A(n)?n.length:d.keys(n).length},d.partition=O(function(n,e,t){n[t?0:1].push(e)},!0),d.first=d.head=d.take=function(n,e,t){return null==n||n.length<1?null==e?void 0:[]:null==e||t?n[0]:d.initial(n,n.length-e)},d.initial=function(n,e,t){return l.call(n,0,Math.max(0,n.length-(null==e||t?1:e)))},d.last=function(n,e,t){return null==n||n.length<1?null==e?void 0:[]:null==e||t?n[n.length-1]:d.rest(n,Math.max(0,n.length-e))},d.rest=d.tail=d.drop=function(n,e,t){return l.call(n,null==e||t?1:e)},d.compact=function(n){return d.filter(n,Boolean)};var I=function(n,e,t,r){for(var i=(r=r||[]).length,u=0,o=w(n);u<o;u++){var a=n[u];if(A(a)&&(d.isArray(a)||d.isArguments(a)))if(e)for(var c=0,l=a.length;c<l;)r[i++]=a[c++];else I(a,e,t,r),i=r.length;else t||(r[i++]=a)}return r};d.flatten=function(n,e){return I(n,e,!1)},d.without=_(function(n,e){return d.difference(n,e)}),d.uniq=d.unique=function(n,e,t,r){d.isBoolean(e)||(r=t,t=e,e=!1),null!=t&&(t=m(t,r));for(var i=[],u=[],o=0,a=w(n);o<a;o++){var c=n[o],l=t?t(c,o,n):c;e&&!t?(o&&u===l||i.push(c),u=l):t?d.contains(u,l)||(u.push(l),i.push(c)):d.contains(i,c)||i.push(c)}return i},d.union=_(function(n){return d.uniq(I(n,!0,!0))}),d.intersection=function(n){for(var e=[],t=arguments.length,r=0,i=w(n);r<i;r++){var u=n[r];if(!d.contains(e,u)){var o;for(o=1;o<t&&d.contains(arguments[o],u);o++);o===t&&e.push(u)}}return e},d.difference=_(function(n,e){return e=I(e,!0,!0),d.filter(n,function(n){return!d.contains(e,n)})}),d.unzip=function(n){for(var e=n&&d.max(n,w).length||0,t=Array(e),r=0;r<e;r++)t[r]=d.pluck(n,r);return t},d.zip=_(d.unzip),d.object=function(n,e){for(var t={},r=0,i=w(n);r<i;r++)e?t[n[r]]=e[r]:t[n[r][0]]=n[r][1];return t};var F=function(n){return function(e,t,r){t=m(t,r);for(var i=w(e),u=n>0?0:i-1;u>=0&&u<i;u+=n)if(t(e[u],u,e))return u;return-1}};d.findIndex=F(1),d.findLastIndex=F(-1),d.sortedIndex=function(n,e,t,r){for(var i=(t=m(t,r,1))(e),u=0,o=w(n);u<o;){var a=Math.floor((u+o)/2);t(n[a])<i?u=a+1:o=a}return u};var q=function(n,e,t){return function(r,i,u){var o=0,a=w(r);if("number"==typeof u)n>0?o=u>=0?u:Math.max(u+a,o):a=u>=0?Math.min(u+1,a):u+a+1;else if(t&&u&&a)return r[u=t(r,i)]===i?u:-1;if(i!=i)return(u=e(l.call(r,o,a),d.isNaN))>=0?u+o:-1;for(u=n>0?o:a-1;u>=0&&u<a;u+=n)if(r[u]===i)return u;return-1}};d.indexOf=q(1,d.findIndex,d.sortedIndex),d.lastIndexOf=q(-1,d.findLastIndex),d.range=function(n,e,t){null==e&&(e=n||0,n=0),t||(t=e<n?-1:1);for(var r=Math.max(Math.ceil((e-n)/t),0),i=Array(r),u=0;u<r;u++,n+=t)i[u]=n;return i},d.chunk=function(n,e){if(null==e||e<1)return[];for(var t=[],r=0,i=n.length;r<i;)t.push(l.call(n,r,r+=e));return t};var M=function(n,e,t,r,i){if(!(r instanceof e))return n.apply(t,i);var u=b(n.prototype),o=n.apply(u,i);return d.isObject(o)?o:u};d.bind=_(function(n,e,t){if(!d.isFunction(n))throw new TypeError("Bind must be called on a function");var r=_(function(i){return M(n,r,e,this,t.concat(i))});return r}),d.partial=_(function(n,e){var t=d.partial.placeholder,r=function(){for(var i=0,u=e.length,o=Array(u),a=0;a<u;a++)o[a]=e[a]===t?arguments[i++]:e[a];for(;i<arguments.length;)o.push(arguments[i++]);return M(n,r,this,this,o)};return r}),d.partial.placeholder=d,d.bindAll=_(function(n,e){var t=(e=I(e,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var r=e[t];n[r]=d.bind(n[r],n)}}),d.memoize=function(n,e){var t=function(r){var i=t.cache,u=""+(e?e.apply(this,arguments):r);return k(i,u)||(i[u]=n.apply(this,arguments)),i[u]};return t.cache={},t},d.delay=_(function(n,e,t){return setTimeout(function(){return n.apply(null,t)},e)}),d.defer=d.partial(d.delay,d,1),d.throttle=function(n,e,t){var r,i,u,o,a=0;t||(t={});var c=function(){a=!1===t.leading?0:d.now(),r=null,o=n.apply(i,u),r||(i=u=null)},l=function(){var l=d.now();a||!1!==t.leading||(a=l);var s=e-(l-a);return i=this,u=arguments,s<=0||s>e?(r&&(clearTimeout(r),r=null),a=l,o=n.apply(i,u),r||(i=u=null)):r||!1===t.trailing||(r=setTimeout(c,s)),o};return l.cancel=function(){clearTimeout(r),a=0,r=i=u=null},l},d.debounce=function(n,e,t){var r,i,u=function(e,t){r=null,t&&(i=n.apply(e,t))},o=_(function(o){if(r&&clearTimeout(r),t){var a=!r;r=setTimeout(u,e),a&&(i=n.apply(this,o))}else r=d.delay(u,e,this,o);return i});return o.cancel=function(){clearTimeout(r),r=null},o},d.wrap=function(n,e){return d.partial(e,n)},d.negate=function(n){return function(){return!n.apply(this,arguments)}},d.compose=function(){var n=arguments,e=n.length-1;return function(){for(var t=e,r=n[e].apply(this,arguments);t--;)r=n[t].call(this,r);return r}},d.after=function(n,e){return function(){if(--n<1)return e.apply(this,arguments)}},d.before=function(n,e){var t;return function(){return--n>0&&(t=e.apply(this,arguments)),n<=1&&(e=null),t}},d.once=d.partial(d.before,2),d.restArguments=_;var N=!{toString:null}.propertyIsEnumerable("toString"),R=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Q=function(n,e){var t=R.length,r=n.constructor,i=d.isFunction(r)&&r.prototype||o,u="constructor";for(k(n,u)&&!d.contains(e,u)&&e.push(u);t--;)(u=R[t])in n&&n[u]!==i[u]&&!d.contains(e,u)&&e.push(u)};d.keys=function(n){if(!d.isObject(n))return[];if(h)return h(n);var e=[];for(var t in n)k(n,t)&&e.push(t);return N&&Q(n,e),e},d.allKeys=function(n){if(!d.isObject(n))return[];var e=[];for(var t in n)e.push(t);return N&&Q(n,e),e},d.values=function(n){for(var e=d.keys(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=n[e[i]];return r},d.mapObject=function(n,e,t){e=m(e,t);for(var r=d.keys(n),i=r.length,u={},o=0;o<i;o++){var a=r[o];u[a]=e(n[a],a,n)}return u},d.pairs=function(n){for(var e=d.keys(n),t=e.length,r=Array(t),i=0;i<t;i++)r[i]=[e[i],n[e[i]]];return r},d.invert=function(n){for(var e={},t=d.keys(n),r=0,i=t.length;r<i;r++)e[n[t[r]]]=t[r];return e},d.functions=d.methods=function(n){var e=[];for(var t in n)d.isFunction(n[t])&&e.push(t);return e.sort()};var L=function(n,e){return function(t){var r=arguments.length;if(e&&(t=Object(t)),r<2||null==t)return t;for(var i=1;i<r;i++)for(var u=arguments[i],o=n(u),a=o.length,c=0;c<a;c++){var l=o[c];e&&void 0!==t[l]||(t[l]=u[l])}return t}};d.extend=L(d.allKeys),d.extendOwn=d.assign=L(d.keys),d.findKey=function(n,e,t){e=m(e,t);for(var r,i=d.keys(n),u=0,o=i.length;u<o;u++)if(e(n[r=i[u]],r,n))return r};var U,D,P=function(n,e,t){return e in t};d.pick=_(function(n,e){var t={},r=e[0];if(null==n)return t;d.isFunction(r)?(e.length>1&&(r=S(r,e[1])),e=d.allKeys(n)):(r=P,e=I(e,!1,!1),n=Object(n));for(var i=0,u=e.length;i<u;i++){var o=e[i],a=n[o];r(a,o,n)&&(t[o]=a)}return t}),d.omit=_(function(n,e){var t,r=e[0];return d.isFunction(r)?(r=d.negate(r),e.length>1&&(t=e[1])):(e=d.map(I(e,!1,!1),String),r=function(n,t){return!d.contains(e,t)}),d.pick(n,r,t)}),d.defaults=L(d.allKeys,!0),d.create=function(n,e){var t=b(n);return e&&d.extendOwn(t,e),t},d.clone=function(n){return d.isObject(n)?d.isArray(n)?n.slice():d.extend({},n):n},d.tap=function(n,e){return e(n),n},d.isMatch=function(n,e){var t=d.keys(e),r=t.length;if(null==n)return!r;for(var i=Object(n),u=0;u<r;u++){var o=t[u];if(e[o]!==i[o]||!(o in i))return!1}return!0},U=function(n,e,t,r){if(n===e)return 0!==n||1/n==1/e;if(null==n||null==e)return!1;if(n!=n)return e!=e;var i=typeof n;return("function"===i||"object"===i||"object"==typeof e)&&D(n,e,t,r)},D=function(n,e,t,r){n instanceof d&&(n=n._wrapped),e instanceof d&&(e=e._wrapped);var i=s.call(n);if(i!==s.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+e;case"[object Number]":return+n!=+n?+e!=+e:0==+n?1/+n==1/e:+n==+e;case"[object Date]":case"[object Boolean]":return+n==+e;case"[object Symbol]":return a.valueOf.call(n)===a.valueOf.call(e)}var u="[object Array]"===i;if(!u){if("object"!=typeof n||"object"!=typeof e)return!1;var o=n.constructor,c=e.constructor;if(o!==c&&!(d.isFunction(o)&&o instanceof o&&d.isFunction(c)&&c instanceof c)&&"constructor"in n&&"constructor"in e)return!1}r=r||[];for(var l=(t=t||[]).length;l--;)if(t[l]===n)return r[l]===e;if(t.push(n),r.push(e),u){if((l=n.length)!==e.length)return!1;for(;l--;)if(!U(n[l],e[l],t,r))return!1}else{var f,p=d.keys(n);if(l=p.length,d.keys(e).length!==l)return!1;for(;l--;)if(f=p[l],!k(e,f)||!U(n[f],e[f],t,r))return!1}return t.pop(),r.pop(),!0},d.isEqual=function(n,e){return U(n,e)},d.isEmpty=function(n){return null==n||(A(n)&&(d.isArray(n)||d.isString(n)||d.isArguments(n))?0===n.length:0===d.keys(n).length)},d.isElement=function(n){return!(!n||1!==n.nodeType)},d.isArray=p||function(n){return"[object Array]"===s.call(n)},d.isObject=function(n){var e=typeof n;return"function"===e||"object"===e&&!!n},d.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){d["is"+n]=function(e){return s.call(e)==="[object "+n+"]"}}),d.isArguments(arguments)||(d.isArguments=function(n){return k(n,"callee")});var W=r.document&&r.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof W&&(d.isFunction=function(n){return"function"==typeof n||!1}),d.isFinite=function(n){return!d.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},d.isNaN=function(n){return d.isNumber(n)&&isNaN(n)},d.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)},d.isNull=function(n){return null===n},d.isUndefined=function(n){return void 0===n},d.has=function(n,e){if(!d.isArray(e))return k(n,e);for(var t=e.length,r=0;r<t;r++){var i=e[r];if(null==n||!f.call(n,i))return!1;n=n[i]}return!!t},d.noConflict=function(){return r._=i,this},d.identity=function(n){return n},d.constant=function(n){return function(){return n}},d.noop=function(){},d.property=function(n){return d.isArray(n)?function(e){return j(e,n)}:x(n)},d.propertyOf=function(n){return null==n?function(){}:function(e){return d.isArray(e)?j(n,e):n[e]}},d.matcher=d.matches=function(n){return n=d.extendOwn({},n),function(e){return d.isMatch(e,n)}},d.times=function(n,e,t){var r=Array(Math.max(0,n));e=S(e,t,1);for(var i=0;i<n;i++)r[i]=e(i);return r},d.random=function(n,e){return null==e&&(e=n,n=0),n+Math.floor(Math.random()*(e-n+1))},d.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=d.invert(B),z=function(n){var e=function(e){return n[e]},t="(?:"+d.keys(n).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,e):n}};d.escape=z(B),d.unescape=z(Y),d.result=function(n,e,t){d.isArray(e)||(e=[e]);var r=e.length;if(!r)return d.isFunction(t)?t.call(n):t;for(var i=0;i<r;i++){var u=null==n?void 0:n[e[i]];void 0===u&&(u=t,i=r),n=d.isFunction(u)?u.call(n):u}return n};var K=0;d.uniqueId=function(n){var e=++K+"";return n?n+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var G=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,J=function(n){return"\\"+H[n]};d.template=function(n,e,t){!e&&t&&(e=t),e=d.defaults({},e,d.templateSettings);var r,i=RegExp([(e.escape||G).source,(e.interpolate||G).source,(e.evaluate||G).source].join("|")+"|$","g"),u=0,o="__p+='";n.replace(i,function(e,t,r,i,a){return o+=n.slice(u,a).replace(V,J),u=a+e.length,t?o+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":i&&(o+="';\n"+i+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(e.variable||"obj","_",o)}catch(n){throw n.source=o,n}var a=function(n){return r.call(this,n,d)},c=e.variable||"obj";return a.source="function("+c+"){\n"+o+"}",a},d.chain=function(n){var e=d(n);return e._chain=!0,e};var $=function(n,e){return n._chain?d(e).chain():e};d.mixin=function(n){return d.each(d.functions(n),function(e){var t=d[e]=n[e];d.prototype[e]=function(){var n=[this._wrapped];return c.apply(n,arguments),$(this,t.apply(d,n))}}),d},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var e=u[n];d.prototype[n]=function(){var t=this._wrapped;return e.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],$(this,t)}}),d.each(["concat","join","slice"],function(n){var e=u[n];d.prototype[n]=function(){return $(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(n,e,t){"use strict";var r=n("underscore"),i=n("../events");e.exports=function(n){var e=n.getComponent("MenuItem");return n.extend(e,{constructor:function(n,t){var i=t.source;if(!r.isObject(i))throw new Error('was not provided a "source" object, but rather: '+typeof i);t=r.extend({selectable:!0,label:i.label},t),e.call(this,n,t),this.source=i},handleClick:function(n){e.prototype.handleClick.call(this,n),this.player().trigger(i.QUALITY_REQUESTED,this.source)}})}},{"../events":5,underscore:2}],4:[function(n,e,t){"use strict";var r=n("underscore"),i=n("../events"),u=n("./QualityOption");e.exports=function(n){var e,t=n.getComponent("MenuButton"),o=u(n);return e=n.extend(t,{constructor:function(n,e){t.call(this,n,e),n.on(i.QUALITY_REQUESTED,function(e,t){this.setSelectedSource(t),n.addClass("vjs-quality-changing"),n.one("loadeddata",function(){n.removeClass("vjs-quality-changing")})}.bind(this)),n.on(i.PLAYER_SOURCES_CHANGED,function(){this.update()}.bind(this)),n.on(i.QUALITY_SELECTED,function(n,e){this.setSelectedSource(e)}.bind(this)),n.one("ready",function(){this.selectedSrc=n.src(),this.update()}.bind(this)),this.controlText("Quality")},setSelectedSource:function(n){var e=n?n.src:void 0;this.selectedSrc!==e&&(this.selectedSrc=e,r.each(this.items,function(n){n.selected(n.source.src===e)}))},createItems:function(){var n=this.player(),e=n.currentSources();return!e||e.length<2?[]:r.map(e,function(e){return new o(n,{source:e,selected:e.src===this.selectedSrc})}.bind(this))},buildWrapperCSSClass:function(){return"vjs-quality-selector "+t.prototype.buildWrapperCSSClass.call(this)}}),n.registerComponent("QualitySelector",e),e}},{"../events":5,"./QualityOption":3,underscore:2}],5:[function(n,e,t){"use strict";e.exports={QUALITY_REQUESTED:"qualityRequested",QUALITY_SELECTED:"qualitySelected",PLAYER_SOURCES_CHANGED:"playerSourcesChanged"}},{}],6:[function(n,e,t){"use strict";var r=n("underscore"),i=n("./events"),u=n("./components/QualitySelector"),o=n("./middleware/SourceInterceptor"),a=n("./util/SafeSeek");e.exports=function(n){n=n||window.videojs,u(n),o(n),n.hook("setup",function(n){n.on(i.QUALITY_REQUESTED,function(e,t){var i=n.currentSources(),u=n.currentTime(),o=n.playbackRate(),c=n.paused();r.each(i,function(n){n.selected=!1}),r.findWhere(i,{src:t.src}).selected=!0,n._qualitySelectorSafeSeek&&n._qualitySelectorSafeSeek.onQualitySelectionChange(),n.src(i),n.ready(function(){n._qualitySelectorSafeSeek&&!n._qualitySelectorSafeSeek.hasFinished()||(n._qualitySelectorSafeSeek=new a(n,u),n.playbackRate(o)),c||n.play()})})})},e.exports.EVENTS=i},{"./components/QualitySelector":4,"./events":5,"./middleware/SourceInterceptor":7,"./util/SafeSeek":9,underscore:2}],7:[function(n,e,t){"use strict";var r=n("underscore"),i=n("../events");e.exports=function(n){n.use("*",function(n){return{setSource:function(e,t){var u,o=n.currentSources();n._qualitySelectorSafeSeek&&n._qualitySelectorSafeSeek.onPlayerSourcesChange(),r.isEqual(o,n._qualitySelectorPreviousSources)||(n.trigger(i.PLAYER_SOURCES_CHANGED,o),n._qualitySelectorPreviousSources=o),u=r.find(o,function(n){return!0===n.selected||"true"===n.selected||"selected"===n.selected})||e,n.trigger(i.QUALITY_SELECTED,u),t(null,u)}}})}},{"../events":5,underscore:2}],8:[function(n,e,t){"use strict";n("./index")()},{"./index":6}],9:[function(n,e,t){"use strict";var r=n("class.extend");e.exports=r.extend({init:function(n,e){this._player=n,this._seekToTime=e,this._hasFinished=!1,this._keepThisInstanceWhenPlayerSourcesChange=!1,this._seekWhenSafe()},_seekWhenSafe:function(){this._player.readyState()<3?(this._seekFn=this._seek.bind(this),this._player.one("canplay",this._seekFn)):this._seek()},onPlayerSourcesChange:function(){this._keepThisInstanceWhenPlayerSourcesChange?this._keepThisInstanceWhenPlayerSourcesChange=!1:this.cancel()},onQualitySelectionChange:function(){this.hasFinished()||(this._keepThisInstanceWhenPlayerSourcesChange=!0)},_seek:function(){this._player.currentTime(this._seekToTime),this._keepThisInstanceWhenPlayerSourcesChange=!1,this._hasFinished=!0},hasFinished:function(){return this._hasFinished},cancel:function(){this._player.off("canplay",this._seekFn),this._keepThisInstanceWhenPlayerSourcesChange=!1,this._hasFinished=!0}})},{"class.extend":1}]},{},[8]);
